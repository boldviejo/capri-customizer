{% comment %}
  This block replaces the standard Add to Cart button with a customizable product experience.
  It allows customers to add custom text to products before adding them to cart.
{% endcomment %}

<div class="product-customizer"
  data-product-id="{{ block.settings.product.id }}"
  data-product-handle="{{ block.settings.product.handle }}"
  data-shop="{{ shop.permanent_domain }}">
  
  <div class="product-customizer__container">
    <h3 class="product-customizer__title">{{ block.settings.customizer_title }}</h3>
    
    <div class="product-customizer__field">
      <label for="customizer-text" class="product-customizer__label">{{ block.settings.text_field_label }}</label>
      <input 
        type="text" 
        id="customizer-text" 
        class="product-customizer__input" 
        placeholder="{{ block.settings.text_field_placeholder }}"
        maxlength="{{ block.settings.max_text_length }}">
    </div>
    
    <div class="product-customizer__field">
      <label class="product-customizer__label">{{ 'customizer.font_family' | t }}</label>
      <select id="customizer-font" class="product-customizer__select">
        <option value="Arial">Arial</option>
        <option value="Helvetica">Helvetica</option>
        <option value="Times New Roman">Times New Roman</option>
        <option value="Courier New">Courier New</option>
        <option value="Verdana">Verdana</option>
      </select>
    </div>
    
    <div class="product-customizer__field">
      <label class="product-customizer__label">{{ 'customizer.font_size' | t }}</label>
      <select id="customizer-size" class="product-customizer__select">
        <option value="12">{{ 'customizer.small' | t }} (12px)</option>
        <option value="16" selected>{{ 'customizer.medium' | t }} (16px)</option>
        <option value="20">{{ 'customizer.large' | t }} (20px)</option>
        <option value="24">{{ 'customizer.xl' | t }} (24px)</option>
      </select>
    </div>
    
    <div class="product-customizer__field">
      <label class="product-customizer__label">{{ 'customizer.text_color' | t }}</label>
      <div class="product-customizer__color-options">
        <div class="color-option" data-color="#000000" style="background-color: #000000;"></div>
        <div class="color-option" data-color="#FF0000" style="background-color: #FF0000;"></div>
        <div class="color-option" data-color="#0000FF" style="background-color: #0000FF;"></div>
        <div class="color-option" data-color="#00FF00" style="background-color: #00FF00;"></div>
        <div class="color-option" data-color="#FFD700" style="background-color: #FFD700;"></div>
        <div class="color-option" data-color="#C0C0C0" style="background-color: #C0C0C0;"></div>
      </div>
    </div>
    
    <div class="product-customizer__preview">
      <h4 class="product-customizer__preview-title">{{ 'customizer.preview' | t }}</h4>
      <div id="customizer-preview" class="product-customizer__preview-box">
        <div id="customizer-preview-text">{{ 'customizer.preview_placeholder' | t }}</div>
      </div>
    </div>
    
    <div class="product-customizer__actions">
      <button id="customizer-add-to-cart" class="product-customizer__button" type="button">
        {{ block.settings.button_text }}
      </button>
    </div>
  </div>
</div>

<script src="{{ 'product-customizer.js' | asset_url }}" defer></script>
<link rel="stylesheet" href="{{ 'product-customizer.css' | asset_url }}">

{% schema %}
{
  "name": "Product Customizer",
  "target": "section",
  "stylesheet": "product-customizer.css",
  "javascript": "product-customizer.js",
  "settings": [
    {
      "type": "product",
      "id": "product",
      "label": "Product",
      "autofill": true
    },
    {
      "type": "text",
      "id": "customizer_title",
      "label": "Customizer Title",
      "default": "Customize Your Product"
    },
    {
      "type": "text",
      "id": "text_field_label",
      "label": "Text Field Label",
      "default": "Custom Text"
    },
    {
      "type": "text",
      "id": "text_field_placeholder",
      "label": "Text Field Placeholder",
      "default": "Enter your custom text here"
    },
    {
      "type": "number",
      "id": "max_text_length",
      "label": "Maximum Text Length",
      "default": 50
    },
    {
      "type": "text",
      "id": "button_text",
      "label": "Button Text",
      "default": "Add Customized Product to Cart"
    }
  ]
}
{% endschema %} 